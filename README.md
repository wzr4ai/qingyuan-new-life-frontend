# é’å…ƒæ–°ç”Ÿ (Qingyuan New Life) - å‰ç«¯é¡¹ç›®

æœ¬é¡¹ç›®æ˜¯â€œé’å…ƒæ–°ç”Ÿâ€é¢„çº¦ç®¡ç†å¹³å°çš„ uni-app å‰ç«¯ï¼ŒåŸºäº Vue 3 å’Œ Pinia æ„å»ºã€‚å®ƒæ”¯æŒå¤šè§’è‰²ï¼ˆå®¢æˆ·ã€æŠ€å¸ˆã€ç®¡ç†å‘˜ï¼‰åŠ¨æ€ç•Œé¢ï¼Œå¹¶ä¸»è¦é’ˆå¯¹å¾®ä¿¡å°ç¨‹åºå¹³å°ã€‚

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

* **å¤šè§’è‰²æƒé™ç³»ç»Ÿ (RBAC):**
    * **å®¢æˆ· (Customer):** æµè§ˆæœåŠ¡ã€å‘èµ·å’ŒæŸ¥çœ‹ä¸ªäººé¢„çº¦ã€‚
    * **æŠ€å¸ˆ (Technician):** æŸ¥çœ‹å’Œç®¡ç†è‡ªå·±çš„æ’ç­ä¸é¢„çº¦åˆ—è¡¨ã€‚
    * **ç®¡ç†å‘˜ (Admin):** ç®¡ç†ä»ªè¡¨ç›˜ã€åŸºç¡€æ•°æ®ï¼ˆåœ°ç‚¹ã€æœåŠ¡ã€èµ„æºï¼‰å’Œäººå‘˜æ’ç­ã€‚
* **åŠ¨æ€ TabBar:** åº”ç”¨å¯åŠ¨æ—¶ï¼Œä¼šæ ¹æ®ç”¨æˆ·è§’è‰²ï¼ˆå®¢æˆ·ã€æŠ€å¸ˆã€ç®¡ç†å‘˜ï¼‰è‡ªåŠ¨åˆ‡æ¢åº•éƒ¨ TabBar å¯¼èˆªæ ï¼Œæä¾›å®Œå…¨ä¸åŒçš„ç”¨æˆ·ä½“éªŒã€‚
* **è‡ªåŠ¨åŒ–ç™»å½•æµç¨‹:**
    * **å¾®ä¿¡ç«¯ (å®¢æˆ·/æŠ€å¸ˆ):** å¯åŠ¨æ—¶è‡ªåŠ¨æ‰§è¡Œ `uni.login` å’Œåç«¯ `wxLogin`ï¼Œå®ç°é™é»˜ç™»å½•ã€‚
    * **ç®¡ç†ç«¯ (H5/PC):** æä¾›ç‹¬ç«‹çš„æ‰‹æœºå·å¯†ç ç™»å½•é¡µã€‚
* **çŠ¶æ€ç®¡ç†:** ä½¿ç”¨ Pinia (`store/user.js`) é›†ä¸­ç®¡ç†ç”¨æˆ·çš„ `token` å’Œ `userInfo`ï¼ˆåŒ…å«è§’è‰²ï¼‰ã€‚
* **API è¯·æ±‚å°è£…:** æ‰€æœ‰åç«¯è¯·æ±‚é€šè¿‡ `api/request.js` ç»Ÿä¸€å¤„ç†ï¼Œè‡ªåŠ¨é™„åŠ è®¤è¯ `Token`ï¼Œå¹¶å¤„ç† 401 Token å¤±æ•ˆï¼ˆè‡ªåŠ¨ç™»å‡ºï¼‰ç­‰é€»è¾‘ã€‚
* **ç®¡ç†åå° CRUD:** åŒ…å«å¯¹â€œåœ°ç‚¹ç®¡ç†â€ã€â€œæœåŠ¡ç®¡ç†â€ã€â€œèµ„æºç®¡ç†â€ ç­‰æ¨¡å—çš„å®Œæ•´å¢åˆ æ”¹æŸ¥ç•Œé¢ã€‚

## ğŸš€ æŠ€æœ¯æ ˆ

* **æ ¸å¿ƒæ¡†æ¶:** [uni-app](https://uniapp.dcloud.io/)
* **JavaScript æ¡†æ¶:** [Vue 3](https://vuejs.org/) (ä½¿ç”¨ Composition API `setup` è¯­æ³•ç³–)
* **çŠ¶æ€ç®¡ç†:** [Pinia](https://pinia.vuejs.org/)
* **UI ç»„ä»¶åº“:** [uni-ui](https://ext.dcloud.net.cn/plugin?id=55) (é€šè¿‡ `easycom` è‡ªåŠ¨å¼•å…¥)
* **ç›®æ ‡å¹³å°:** å¾®ä¿¡å°ç¨‹åº (ä¸»è¦) åŠ H5 ç®¡ç†åå°ã€‚

## ğŸ“¦ é¡¹ç›®ç»“æ„
qingyuan-new-life-frontend/
â”‚
â”œâ”€â”€ api/                   # åç«¯ API æ¥å£ (auth.js, admin.js, request.js)
â”œâ”€â”€ pages/                 # æ ¸å¿ƒé¡µé¢
â”‚   â”œâ”€â”€ admin/             # ç®¡ç†å‘˜ Tab é¡µé¢ (ä»ªè¡¨ç›˜ã€ç®¡ç†ã€æ’ç­)
â”‚   â”œâ”€â”€ admin-crud/        # ç®¡ç†å‘˜ CRUD è¯¦æƒ…é¡µ (åœ°ç‚¹ã€æœåŠ¡ã€èµ„æºç­‰)
â”‚   â”œâ”€â”€ appointment/       # å®¢æˆ·-æˆ‘çš„é¢„çº¦
â”‚   â”œâ”€â”€ index/             # å®¢æˆ·-é¢„çº¦é¦–é¡µ
â”‚   â”œâ”€â”€ profile/           # é€šç”¨-ä¸ªäººä¸­å¿ƒ
â”‚   â””â”€â”€ tech/              # æŠ€å¸ˆ Tab é¡µé¢ (æ’ç­ã€é¢„çº¦)
â”‚
â”œâ”€â”€ static/                # é™æ€èµ„æº (å›¾ç‰‡, logo.png, admin.css)
â”œâ”€â”€ store/                 # Pinia çŠ¶æ€ç®¡ç† (user.js)
â”œâ”€â”€ App.vue                # åº”ç”¨å…¥å£ (å¤„ç† onLaunch è‡ªåŠ¨ç™»å½•)
â”œâ”€â”€ main.js                # Vue 3 å’Œ Pinia å®ä¾‹åŒ–
â”œâ”€â”€ pages.json             # é¡µé¢è·¯ç”±ä¸ TabBar é…ç½®
â””â”€â”€ manifest.json          # åº”ç”¨é…ç½® (AppID ç­‰)

## ğŸ› ï¸ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

* Node.js (>= 16)
* HBuilderX (æ¨è) æˆ– VSCode
* å¾®ä¿¡å¼€å‘è€…å·¥å…·

### æœ¬åœ°å¼€å‘ (å¾®ä¿¡å°ç¨‹åº)

1.  **å…‹éš†é¡¹ç›®**
    ```bash
    git clone [æ‚¨çš„é¡¹ç›®ä»“åº“åœ°å€]
    cd qingyuan-new-life-frontend
    ```

2.  **å®‰è£…ä¾èµ–**
    ```bash
    npm install
    ```

3.  **é…ç½®åç«¯ API**
    æ‰“å¼€ `api/request.js` æ–‡ä»¶ï¼Œä¿®æ”¹ `BASE_URL` ä¸ºæ‚¨çš„åç«¯æœåŠ¡å™¨åœ°å€ï¼š
    ```javascript
    // api/request.js
    const BASE_URL = '[https://qyxs.online/dev/](https://qyxs.online/dev/)'; // æ›¿æ¢ä¸ºæ‚¨çš„åç«¯ URL
    ```

4.  **é…ç½®å¾®ä¿¡ AppID**
    æ‰“å¼€ `manifest.json` æ–‡ä»¶ï¼Œåœ¨ `mp-weixin` å­—æ®µä¸­å¡«å…¥æ‚¨è‡ªå·±çš„å¾®ä¿¡å°ç¨‹åº AppIDï¼š
    ```json
    // manifest.json
    "mp-weixin": {
        "appid": "wxfff7b0e8e79e494f", // æ›¿æ¢ä¸ºæ‚¨çš„ AppID
        // ...
    }
    ```

5.  **è¿è¡Œåˆ°å¾®ä¿¡å¼€å‘è€…å·¥å…·**

    * **HBuilderX ç”¨æˆ·:**
        1.  åœ¨ HBuilderX ä¸­æ‰“å¼€é¡¹ç›®ã€‚
        2.  ç‚¹å‡»é¡¶éƒ¨èœå•â€œè¿è¡Œâ€ -> â€œè¿è¡Œåˆ°å°ç¨‹åºæ¨¡æ‹Ÿå™¨â€ -> â€œå¾®ä¿¡å¼€å‘è€…å·¥å…·â€ã€‚
        3.  HBuilderX å°†è‡ªåŠ¨ç¼–è¯‘å¹¶åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­æ‰“å¼€é¡¹ç›®ã€‚

    * **CLI ç”¨æˆ· (å‘½ä»¤è¡Œ):**
        ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼š
        ```bash
        npx @dcloudio/uni-app-cli dev -p mp-weixin
        ```
        è¯¥å‘½ä»¤ä¼šåœ¨ `unpackage/dist/dev/mp-weixin/` ç›®å½•ä¸‹ç”Ÿæˆå°ç¨‹åºä»£ç ã€‚ç„¶åæ‰“å¼€å¾®ä¿¡å¼€å‘è€…å·¥å…·ï¼Œå¯¼å…¥è¯¥ç›®å½•å³å¯ã€‚

### æ‰“åŒ…æ„å»º (å¾®ä¿¡å°ç¨‹åº)

* **HBuilderX ç”¨æˆ·:**
    ç‚¹å‡»é¡¶éƒ¨èœå•â€œå‘è¡Œâ€ -> â€œå°ç¨‹åº-å¾®ä¿¡â€ã€‚

* **CLI ç”¨æˆ· (å‘½ä»¤è¡Œ):**
    æ‰§è¡Œæ„å»ºå‘½ä»¤ï¼š
    ```bash
    npx @dcloudio/uni-app-cli build -p mp-weixin
    ```
    æ„å»ºäº§ç‰©å°†ç”Ÿæˆåœ¨ `unpackage/dist/build/mp-weixin/` ç›®å½•ä¸‹ï¼Œç”¨äºä¸Šä¼ åˆ°å¾®ä¿¡åå°ã€‚
